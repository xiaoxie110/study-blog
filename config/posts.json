{
  "posts": [
    {
      "content": "[Illuminate/Cache/Repository.php][1]\r\n[Illuminate/Cache/CacheManager.php][2]\r\n#### é…ç½®\r\n> Laravel æ”¯æŒå¤šç§ç¼“å­˜ç³»ç»Ÿ, å¹¶æä¾›äº†ç»Ÿä¸€çš„apiæ¥å£ï¼Œæ”¯æŒä»¥ä¸‹å‡ ç§ç¼“å­˜æ¨¡å¼ï¼Œé»˜è®¤ä¸ºfileã€‚é»˜è®¤çš„ç¼“å­˜é…ç½®æ–‡ä»¶åœ¨ config/cache.php\r\n```PHP\r\n 'stores' => [\r\n       //APCç¼“å­˜ï¼ŒAPCæ˜¯PHPçš„ä¸€ä¸ªæ‰©å±•ï¼Œå¯é€‰PHPç¼“å­˜ã€‚å®ƒæä¾›äº†ç¼“å­˜å’Œä¼˜åŒ–PHPçš„ä¸­é—´ä»£ç çš„æ¡†æ¶ã€‚ APCçš„ç¼“å­˜åˆ†ä¸¤éƒ¨åˆ†:ç³»ç»Ÿç¼“å­˜å’Œç”¨æˆ·æ•°æ®ç¼“å­˜ https://www.php.net/manual/zh/book.apc.php\r\n        'apc' => [\r\n            'driver' => 'apc',\r\n        ],\r\n        //æ•°ç»„ç¼“å­˜é©±åŠ¨ï¼ˆarrayï¼‰å¾€å¾€ä»…ä»…ç”¨äºæµ‹è¯•ï¼Œå¥½å¤„æ˜¯ä¸ä¼šæŒä¹…åŒ–ï¼Œåªä¼šåœ¨ä¸€æ¬¡PHPè„šæœ¬æ‰§è¡Œçš„ç”Ÿå‘½å‘¨æœŸå†…æœ‰æ•ˆ\r\n        'array' => [\r\n            'driver' => 'array',\r\n            'serialize' => false,\r\n        ],\r\n        // æ•°æ®åº“ç¼“å­˜é©±åŠ¨ï¼ˆdatabaseï¼‰å°†ç¼“å­˜æ•°æ®å­˜å‚¨åˆ°æ•°æ®åº“ä¸­ï¼Œä½¿ç”¨ä¹‹å‰éœ€è¦åœ¨æ•°æ®åº“ä¸­æ–°å»ºä¸€å¼ è¡¨ç”¨äºå­˜æ”¾ç¼“å­˜é¡¹ï¼Œè¯¥è¡¨è¡¨ç»“æ„å¯å®šä¹‰å¦‚ä¸‹\r\n        'database' => [\r\n            'driver' => 'database',\r\n            'table' => 'cache',\r\n            'connection' => null,\r\n        ],\r\n        // æ–‡ä»¶ç¼“å­˜é©±åŠ¨ï¼ˆfileï¼‰å¾€å¾€åªç”¨äºæœ¬åœ°å¼€å‘æµ‹è¯•ï¼Œå› ä¸ºæ–‡ä»¶ç¼“å­˜å°†ç¼“å­˜å­˜å‚¨åˆ°æ–‡ä»¶ä¸­ï¼Œè¯»å–æ—¶ä»ç¡¬ç›˜è¯»å–ï¼Œæ€§èƒ½è‡ªç„¶ä¸åŠåŸºäºå†…å­˜çš„ç¼“å­˜ç³»ç»Ÿå¦‚APCæˆ–Memcachedä»¥åŠRedisã€‚\r\n        'file' => [\r\n            'driver' => 'file',\r\n            'path' => storage_path('framework/cache/data'),\r\n        ],\r\n        // ï¼ˆmemcachedï¼‰ç¼“å­˜é©±åŠ¨åŸºäºMemcachedï¼Œæ˜¯åŸºäºå†…å­˜çš„åˆ†å¸ƒå¼ç¼“å­˜ç³»ç»Ÿï¼›è¯»å†™æ€§èƒ½ä¼˜å¼‚ï¼Œç‰¹åˆ«æ˜¯é«˜å¹¶å‘æ—¶å’Œæ–‡ä»¶ç¼“å­˜æ¯”æœ‰æ˜æ˜¾ä¼˜åŠ¿ï¼›æ”¯æŒé›†ç¾¤ï¼Œå¹¶ä¸”æ˜¯è‡ªåŠ¨ç®¡ç†è´Ÿè½½å‡è¡¡ã€‚\r\n        'memcached' => [\r\n            'driver' => 'memcached',\r\n            'persistent_id' => env('MEMCACHED_PERSISTENT_ID'),\r\n            'sasl' => [\r\n                env('MEMCACHED_USERNAME'),\r\n                env('MEMCACHED_PASSWORD'),\r\n            ],\r\n            'options' => [\r\n                // Memcached::OPT_CONNECT_TIMEOUT => 2000,\r\n            ],\r\n            'servers' => [\r\n                [\r\n                    'host' => env('MEMCACHED_HOST', '127.0.0.1'),\r\n                    'port' => env('MEMCACHED_PORT', 11211),\r\n                    'weight' => 100,\r\n                ],\r\n            ],\r\n        ],\r\n        //Redis æ˜¯ä¸€ä¸ªå¼€æºçš„ï¼Œé«˜çº§é”®å€¼å¯¹å­˜å‚¨æ•°æ®åº“ã€‚ç”±äºå®ƒåŒ…å« å­—ç¬¦ä¸²ï¼Œå“ˆå¸Œï¼Œåˆ—è¡¨ï¼Œé›†åˆï¼Œå’Œ æœ‰åºé›†åˆ è¿™äº›æ•°æ®ç±»å‹\r\n        'redis' => [\r\n            'driver' => 'redis',\r\n            'connection' => 'cache',\r\n        ],\r\n        // äº‘æ•°æ®åº“ Amazon DynamoDB æ˜¯ä¸€é¡¹å¿«é€Ÿçµæ´»çš„ NoSQLäº‘æ•°æ®åº“æœåŠ¡,å®ƒæ˜¯å®Œå…¨æ‰˜ç®¡çš„æ•°æ®åº“\r\n        'dynamodb' => [\r\n            'driver' => 'dynamodb',\r\n            'key' => env('AWS_ACCESS_KEY_ID'),\r\n            'secret' => env('AWS_SECRET_ACCESS_KEY'),\r\n            'region' => env('AWS_DEFAULT_REGION', 'us-east-1'),\r\n            'table' => env('DYNAMODB_CACHE_TABLE', 'cache'),\r\n            'endpoint' => env('DYNAMODB_ENDPOINT'),\r\n        ],\r\n```\r\n\r\n\r\n#### å¸¸ç”¨æ–¹æ³•\r\n##### has()\r\n> has($key) åˆ¤æ–­ç¼“å­˜ä¸­æ˜¯å¦å­˜åœ¨è¯¥é”®å¯¹åº”çš„ç¼“å­˜ï¼Œmissing()ç›¸å\r\n```PHP\r\n>>> use Illuminate\\Support\\Facades\\Cache;\r\n>>> Cache::put('key',1);\r\n>>> Cache::has('key');\r\n=> true\r\n>>> Cache::has('key2');\r\n=> false\r\n```\r\n\r\n##### get()\r\n> get($key, $default = null) è·å–ç¼“å­˜keyå¯¹åº”çš„å€¼ï¼Œ$defaultå¯ä»¥ä¼ é»˜è®¤å€¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å‡½æ•°,\r\nmany(array $keys)ï¼ŒgetMultiple($keys, $default = null)ç±»ä¼¼\r\n```PHP\r\n>>> Cache::get('key1');\r\n=> null\r\n>>> Cache::get('key1', 2);//é»˜è®¤å€¼\r\n=> 2\r\n>>> Cache::get(['key','key1']);//å¯ä¸€æ¬¡è·å–å¤šä¸ªæŒ‡å®škey\r\n=> [\r\n     \"key\" => 1,\r\n     \"key1\" => null,\r\n   ]\r\n>>> Cache::get('key1',function(){return 3;});\r\n=> 3\r\n```\r\n\r\n##### pull()\r\n> pull($key, $default = null) å–å›ç·©å­˜keyå°æ‡‰çš„å€¼ä¸¦ç§»é™¤\r\n```PHP\r\n>>> Cache::pull('key')\r\n=> 1\r\n>>> Cache::get('key')\r\n=> null\r\n```\r\n\r\n##### put()&add()\r\n> put($key, $value, $ttl = null);add($key, $value, $ttl = null) å­˜å„²ç·©å­˜ $ttlæœªè¿‡æœŸæ—¶é—´ï¼Œä¸ä¼ çš„forever\r\n```PHP\r\n>>> Cache::put('key',[1,2,3,4],100)\r\n=> true\r\n```\r\n\r\n##### increment()&&decrement()\r\n> å¢åŠ /å‡å°‘ç·©å­˜çš„å€¼\r\n```PHP\r\n>>> Cache::add('key', 1)\r\n=> true\r\n>>> Cache::increment('key')\r\n=> 2\r\n>>> Cache::increment('key', 3)\r\n=> 5\r\n>>> Cache::decrement('key', 3)\r\n=> 2\r\n```\r\n\r\n##### remember()\r\n> remember($key, $ttl, Closure $callback) ç²å–æŒ‡å®škeyçš„ç·©å­˜å€¼ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œå‰‡å­˜å„²å¹¶è¿”å›\r\n```PHP\r\nCache::remember('key', $minutes, function(){ return 'value' });\r\nCache::rememberForever('key', function(){ return 'value' });\r\n```\r\n\r\n##### forget()\r\n\r\n#### cacheæºç è§£è¯»\r\nLaravel ä¸­å¸¸ç”¨ Cache Facade æ¥æ“ä½œç¼“å­˜, å¯¹åº”çš„å®é™…ç±»æ˜¯ Illuminate\\Cache\\CacheManager ç¼“å­˜ç®¡ç†ç±»(å·¥å‚).\r\n>Cache::xxx()\r\n\r\næˆ‘ä»¬é€šè¿‡ CacheManager ç±»è·å–æŒæœ‰ä¸åŒå­˜å‚¨é©±åŠ¨çš„ Illuminate\\Cache\\Repository ç±»\r\n>CacheManager::store($name = null)\r\n\r\nRepository ä»“åº“ç±»ä»£ç†äº†å®ç°å­˜å‚¨é©±åŠ¨æ¥å£ Illuminate\\Contracts\\Cache\\Store çš„ç±»å®ä¾‹.\r\n\r\n```PHP\r\n//åœ¨é…ç½®æ–‡ä»¶ config\\app.php ä¸­å®šä¹‰äº† Cache æœåŠ¡æä¾›è€…\r\n'providers' => [\r\n        // ......\r\n        Illuminate\\Cache\\CacheServiceProvider::class,\r\n        // ......\r\n    ],\r\n    \r\n//Illuminate\\Cache\\CacheServiceProvider æ–‡ä»¶\r\n    public function register()\r\n    {\r\n        $this->app->singleton('cache', function ($app) {\r\n            return new CacheManager($app);//å®ä¾‹åŒ–CacheManager\r\n        });\r\n        $this->app->singleton('cache.store', function ($app) {\r\n            return $app['cache']->driver();\r\n        });\r\n        $this->app->singleton('memcached.connector', function () {\r\n            return new MemcachedConnector;\r\n        });\r\n    }\r\n```\r\n##### CacheManager\r\n>CacheManager å®ç°äº† Illuminate\\Contracts\\Cache\\Factory æ¥å£, å®ç°äº†ä¸€ä¸ªç®€å•å·¥å‚, ä¼ å…¥å­˜å‚¨é©±åŠ¨å, è¿”å›å¯¹åº”çš„é©±åŠ¨å®ä¾‹.\r\n```PHP\r\n// Cache\\Factory å·¥å‚æ¥å£\r\nnamespace Illuminate\\Contracts\\Cache;\r\ninterface Factory\r\n{\r\n    /**\r\n     * Get a cache store instance by name.\r\n     *\r\n     * @param  string|null  $name\r\n     * @return \\Illuminate\\Contracts\\Cache\\Repository\r\n     */\r\n    public function store($name = null);\r\n}\r\n\r\n//CacheManagerå®ç°çš„ç®€å•å·¥å‚æ¥å£æ–¹æ³•\r\nuse Aws\\DynamoDb\\DynamoDbClient;\r\nuse Closure;\r\nuse Illuminate\\Contracts\\Cache\\Factory as FactoryContract;\r\nuse Illuminate\\Contracts\\Cache\\Store;\r\nuse Illuminate\\Contracts\\Events\\Dispatcher as DispatcherContract;\r\nuse Illuminate\\Support\\Arr;\r\nuse InvalidArgumentException;\r\n\r\n/**\r\n * @mixin \\Illuminate\\Contracts\\Cache\\Repository\r\n */\r\nclass CacheManager implements FactoryContract\r\n{\r\n    /**\r\n     * Get a cache store instance by name, wrapped in a repository.\r\n     * å®ç°æ¥å£æ–¹æ³•\r\n     * @param  string|null  $name\r\n     * @return \\Illuminate\\Contracts\\Cache\\Repository\r\n     */\r\n    public function store($name = null)\r\n    {\r\n        $name = $name ?: $this->getDefaultDriver();\r\n\r\n        return $this->stores[$name] = $this->get($name);\r\n    }\r\n    ...\r\n    \r\n    /**\r\n     * Resolve the given store.\r\n     * è§£æè¿‡ç¨‹\r\n     * è‡ªå®šä¹‰é©±åŠ¨: æŸ¥çœ‹æ˜¯å¦æœ‰é€šè¿‡ CacheManager::extend(...)è‡ªå®šä¹‰çš„é©±åŠ¨\r\n     * Laravelæä¾›çš„é©±åŠ¨: æŸ¥çœ‹æ˜¯å¦å­˜åœ¨ CacheManager::createXxxDriver(...)æ–¹æ³•\r\n     * è¿™äº›æ–¹æ³•éƒ½æ˜¯å®ç°äº† Illuminate\\Contracts\\Cache\\Repository æ¥å£ \r\n     *\r\n     * @param  string  $name\r\n     * @return \\Illuminate\\Contracts\\Cache\\Repository\r\n     *\r\n     * @throws \\InvalidArgumentException\r\n     */\r\n    protected function resolve($name)\r\n    {\r\n        $config = $this->getConfig($name);\r\n\r\n        if (is_null($config)) {\r\n            throw new InvalidArgumentException(\"Cache store [{$name}] is not defined.\");\r\n        }\r\n\r\n        if (isset($this->customCreators[$config['driver']])) {\r\n            return $this->callCustomCreator($config);\r\n        } else {\r\n            $driverMethod = 'create'.ucfirst($config['driver']).'Driver';\r\n\r\n            if (method_exists($this, $driverMethod)) {\r\n                return $this->{$driverMethod}($config);\r\n            } else {\r\n                throw new InvalidArgumentException(\"Driver [{$config['driver']}] is not supported.\");\r\n            }\r\n        }\r\n    }\r\n    \r\n\r\n    /**\r\n     * Register a custom driver creator Closure.\r\n     * è‡ªå®šä¹‰ä¸€ä¸ªé©±åŠ¨ç¨‹åºï¼Œ$driverå¯¹åº” config/cache.php é…ç½®æ–‡ä»¶ä¸­çš„ driver é€‰é¡¹ã€‚ ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¿”å› Illuminate\\Cache\\Repository å®ä¾‹çš„é—­åŒ…,ç›¸å½“äºä¸€ä¸ªæœåŠ¡å®¹å™¨çš„å®ä¾‹\r\n     * @param  string  $driver\r\n     * @param  \\Closure  $callback\r\n     * @return $this\r\n     */\r\n    public function extend($driver, Closure $callback)\r\n    {\r\n        $this->customCreators[$driver] = $callback->bindTo($this, $this);\r\n        return $this;\r\n    }\r\n\r\n    /**\r\n     * Dynamically call the default driver instance.\r\n     * é­”æœ¯æ–¹æ³• ä»¥ä¾¿å¿«é€Ÿè°ƒç”¨é»˜è®¤ç¼“å­˜é©±åŠ¨\r\n     *\r\n     * @param  string  $method\r\n     * @param  array  $parameters\r\n     * @return mixed\r\n     */\r\n    public function __call($method, $parameters)\r\n    {\r\n        return $this->store()->$method(...$parameters);\r\n    }\r\n```\r\n##### Repository\r\n>Illuminate\\Contracts\\Cache\\Repository æ¥å£ï¼ŒRepository æ˜¯ä¸€ä¸ªç¬¦åˆ PSR-16: Common Interface for Caching Libraries è§„èŒƒçš„ç¼“å­˜ä»“åº“ç±», å…¶åœ¨Laravelç›¸åº”çš„å®ç°ç±»: Illuminate\\Cache\\Repository,å…¶å®ç°äº†ä»£ç†æ¨¡å¼, å…·ä½“çš„å®ç°æ˜¯äº¤ç”± Illuminate\\Contracts\\Cache\\Store æ¥å¤„ç†ï¼ˆå…·ä½“çš„storeå®ç°ï¼‰, Repository ä¸»è¦ä½œç”¨æ˜¯\r\næä¾›ä¸€äº›ä¾¿æ·æ“ä½œ è¯»å–ç­‰æ“ä½œ\r\nEvent äº‹ä»¶è§¦å‘, åŒ…æ‹¬ç¼“å­˜å‘½ä¸­/æœªå‘½ä¸­ã€å†™å…¥/åˆ é™¤é”®å€¼\r\n\r\n##### Store\r\n>Illuminate\\Contracts\\Cache ç¼“å­˜é©±åŠ¨æ˜¯å®é™…å¤„ç†ç¼“å­˜å¦‚ä½•å†™å…¥/è¯»å–/åˆ é™¤çš„ç±»ï¼Œå…·ä½“çš„å®ç°ç±»æœ‰ï¼š\r\n\r\n    - ApcStore \r\n    - ArrayStore \r\n    - NullStore \r\n    - DatabaseStore \r\n    - FileStore \r\n    - MemcachedStore\r\n    - RedisStore \r\n    - DynamoDbStore\r\n```PHP\r\nnamespace Illuminate\\Contracts\\Cache;\r\ninterface Store\r\n{\r\n    public function get($key);\r\n    public function many(array $keys);\r\n    public function put($key, $value, $minutes);\r\n    public function putMany(array $values, $minutes);\r\n    public function increment($key, $value = 1);\r\n    public function decrement($key, $value = 1);\r\n    public function forever($key, $value);\r\n    public function forget($key);\r\n    public function flush();\r\n    public function getPrefix();\r\n}\r\n```\r\n\r\n#### æ§åˆ¶åè½¬\r\n> cacheç¼“å­˜ä½¿ç”¨äº†ä¾èµ–æ³¨å…¥ï¼Œä¸åè½¬çš„ä¾‹å­ Cacheç±»ä¾èµ–Redis, æ¯æ¬¡ä½¿ç”¨ç¼“å­˜çš„æ—¶å€™æˆ‘ä»¬éƒ½è¦new Redis()\r\n```PHP\r\nclass Cache {\r\n    public function __construct()\r\n    {\r\n        $this->store = new Redis();\r\n    }\r\n}\r\n```\r\n> åè½¬ä½¿ç”¨å®¹å™¨, ç”±å®¹å™¨å®ä¾‹åŒ–å¯¹åº”çš„ç±»ï¼ŒæŠŠæ§åˆ¶æƒç»™äº†å®¹å™¨, æ¯ä¸ªä½¿ç”¨ç¼“å­˜çš„åœ°æ–¹ï¼Œ å¼•å…¥çš„éƒ½æ˜¯å®¹å™¨ï¼Œ ä½¿ç”¨makeè§£æå‡º ç¼“å­˜å¯¹è±¡\r\n```PHP\r\nclass Cache {\r\n    public function __construct(Container $container)\r\n    {\r\n        $this->$container = $container;\r\n\r\n        $this->store = $this->container->make('cache');\r\n    }\r\n}\r\n```\r\n> ç±»ä¼¼è¿™æ ·ï¼Œç»‘å®šä¸€ä¸ªrediså¯¹è±¡ï¼Œä½¿ç”¨çš„æ—¶å€™ç›´æ¥make()è§£æå³å¯\r\n```PHP\r\n$this->app->singleton('cache', function ($app) {\r\n    return new Redis($app);\r\n});\r\n```\r\n>å¦‚æœä¸æƒ³ç”¨redisç¼“å­˜äº†ï¼Œä¸ä½¿ç”¨åè½¬çš„æ—¶å€™ï¼Œéœ€è¦å»æ¯ä¸ªä½¿ç”¨ç¼“å­˜çš„ç±»ä¸­ä¿®æ”¹ï¼Œä½¿ç”¨æ§åˆ¶è½¬åªéœ€è¦åœ¨ç»‘å®šçš„æ—¶å€™ä¿®æ”¹å³å¯ï¼Œå½“ç„¶å®é™…çš„åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿä¸å¿…å»ä¿®æ”¹ç»‘å®šï¼Œæˆ‘ä»¬å¯ä»¥ç±»ä¼¼çš„é€šè¿‡é…ç½®æ¥å®ç°å¿«é€Ÿåˆ‡æ¢ï¼Œç±»ä¼¼äºå·¥å‚æ¨¡å¼æ³¨å…¥\r\n```PHP\r\n//CacheManagerç±»ä¸­å¯ä»¥é€šè¿‡è¯»å–é…ç½®getConfig()\r\n$this->app->singleton('cache', function ($app) {\r\n    return new CacheManager($app);\r\n});\r\n//CacheManagerç›´æ¥è§£æä¸ºå¯¹åº”çš„ç¼“å­˜æ–¹æ³•\r\nprotected function resolve($name)\r\n    {\r\n        $config = $this->getConfig($name);\r\n\r\n        if (is_null($config)) {\r\n            throw new InvalidArgumentException(\"Cache store [{$name}] is not defined.\");\r\n        }\r\n\r\n        if (isset($this->customCreators[$config['driver']])) {\r\n            return $this->callCustomCreator($config);\r\n        } else {\r\n            $driverMethod = 'create'.ucfirst($config['driver']).'Driver';\r\n\r\n            if (method_exists($this, $driverMethod)) {\r\n                return $this->{$driverMethod}($config);\r\n            } else {\r\n                throw new InvalidArgumentException(\"Driver [{$config['driver']}] is not supported.\");\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\n  [1]: https://github.com/xiaoxie110/laravel/blob/master/vendor/laravel/framework/src/Illuminate/Cache/Repository.php\r\n  [2]: https://github.com/xiaoxie110/laravel/blob/master/vendor/laravel/framework/src/Illuminate/Cache/CacheManager.php",
      "data": {
        "title": "Laravelå­¦ä¹ -cacheç¼“å­˜",
        "date": "2020-06-20 21:27:10",
        "tags": [
          "laravel",
          "cache"
        ],
        "published": true,
        "hideInList": false,
        "feature": null,
        "isTop": false
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "laravel-xue-xi-cache-huan-cun"
    },
    {
      "content": "\r\n> é›†åˆï¼ˆCollectionï¼‰Illuminate\\Support\\CollectionÂ ç±»äº†æä¾›ä¸€ä¸ªä¾¿æ·çš„æ“ä½œæ•°ç»„çš„å°è£…ã€‚[Collection.phpæºç è§£è¯»][1]\r\n\r\n[TOC]\r\n\r\n### åˆ›å»ºä¸€ä¸ªæ–°çš„é›†åˆ\r\n \r\n```PHP\r\n//collect è¾…åŠ©å‡½æ•°ä¼šä¸ºæŒ‡å®šçš„æ•°ç»„è¿”å›ä¸€ä¸ªæ–°çš„ Illuminate\\Support\\Collection å®ä¾‹\r\n//æ„é€ å‡½æ•°\r\npublic function __construct($items = [])\r\n{\r\n    //å¯ä»¥ç›´æ¥å°†å¤šç§ç±»å‹è½¬æ¢ä¸ºæ•°ç»„ Laravel Eloquent ORM ä¹Ÿä»¥é›†åˆçš„å½¢å¼è¿”å›æ•°æ®\r\n    $this->items = $this->getArrayableItems($items);\r\n}\r\n// åˆ›å»ºä¸€ä¸ªæ–°çš„é›†åˆ\r\n$newCollection = collect([1, 2, 3, 4, 5]);\r\n```\r\n\r\n### é™æ€å‡½æ•° times()\r\n```PHP\r\né™æ€ times æ–¹æ³•é€šè¿‡è°ƒç”¨ç»™å®šæ¬¡æ•°çš„å›è°ƒå‡½æ•°æ¥åˆ›å»ºæ–°é›†åˆï¼š\r\n\r\npublic static function times($number, callable $callback = null)\r\n{\r\n    if ($number < 1) {\r\n        return new static;\r\n    }\r\n    if (is_null($callback)) {// å›è°ƒå‡½æ•°ä¸ºç©ºï¼Œç›´æ¥è¿”å›range()\r\n        return new static(range(1, $number));\r\n    }\r\n    return (new static(range(1, $number)))->map($callback);//ç»™å®šæ¬¡æ•°è°ƒç”¨å›è°ƒå‡½æ•°\r\n}\r\n// åŸºæœ¬ç”¨æ³•\r\n> Illuminate\\Support\\Collection::times(10, function ($number) {\r\n    return $number * 9;\r\n})all();\r\n=> [9, 18, 27, 36, 45, 54, 63, 72, 81, 90]\r\n\r\n// å›è°ƒå‡½æ•°ä¸ºç©ºï¼Œç›´æ¥è¿”å›range()\r\n> Illuminate\\Support\\Collection::times(2)->all();\r\n=> [1,2,]\r\n```\r\n### æ‡¶é›†åˆ LazyCollection\r\n>LazyCollection ç±»åˆ©ç”¨äº†PHPçš„ç”Ÿæˆå™¨æ¥åœ¨ä¿æŒä½å†…å­˜ä½¿ç”¨ç‡çš„åŒæ—¶ä½¿ç”¨éå¸¸å¤§çš„æ•°æ®é›† å…³é”®å­—ï¼ˆyieldï¼‰ã€‚\r\n```PHP\r\nuse App\\LogEntry;\r\nuse Illuminate\\Support\\LazyCollection;\r\n\r\nLazyCollection::make(function () {\r\n    $handle = fopen('log.txt', 'r');\r\n    while (($line = fgets($handle)) !== false) {\r\n        yield $line;\r\n    }\r\n})->chunk(4)->map(function ($lines) {\r\n    return LogEntry::fromLines($lines);\r\n})->each(function (LogEntry $logEntry) {\r\n    // Process the log entry...\r\n});\r\n```\r\n\r\n### åŸºæœ¬æ•°æ®å¤„ç†\r\n#### avg()\r\n> avg($callback = null) é›†åˆå¹³å‡å€¼ï¼Œæ”¯æŒå›è°ƒå‡½æ•°\r\n```PHP\r\n// ä¸€èˆ¬ç”¨æ³•\r\n>>> collect([1, 1, 2, 4])->avg();\r\n=> 2\r\n\r\n// æŒ‡å®šé”®\r\n>>> collect([['foo' => 10], ['foo' => 10], ['foo' => 20], ['foo' => 40]])->avg('foo')\r\n=> 20\r\n\r\n// å›è°ƒå‡½æ•°\r\n>>> collect([['foo' => 10], ['foo' => 20], ['foo' => 40]])->avg(function($val){return $val['foo']/10;});\r\n=> 2.3333333333333\r\n```\r\n\r\n#### median()\r\n> median($key = null) é›†åˆä¸­ä½æ•°ï¼Œå¯ä»¥æŒ‡å®šé”®\r\n```PHP\r\n// ä¸€èˆ¬ç”¨æ³•\r\n>>> collect([1, 1, 2, 4])->median();\r\n=> 1.5\r\n\r\n// æŒ‡å®šé”®ä¸­ä½æ•°\r\n>>> collect([['foo' => 10], ['foo' => 10], ['foo' => 20], ['foo' => 40]])->median('foo');\r\n=> 15\r\n```\r\n\r\n#### mode()\r\n> mode($key = null) é›†åˆä¼—æ•° æŒ‡å®šé”®çš„ä¼—æ•°[ä¸€ç»„æ•°æ®ä¸­å‡ºç°æ¬¡æ•°æœ€å¤šçš„æ•°å€¼ï¼Œæœ‰å¯èƒ½æ˜¯å¤šä¸ª]\r\n```PHP\r\n// ä¸€èˆ¬ç”¨æ³•\r\n>>> collect([1, 1, 2, 4])->mode();\r\n=> [1]\r\n\r\n// æŒ‡å®šé”®ä¼—æ•°\r\n>>> collect([['foo' => 10], ['foo' => 10], ['foo' => 20], ['foo' => 20], ['foo' => 40]])->mode('foo');\r\n=> [10,20]\r\n```\r\n\r\n#### collapse()\r\n> ä¸€ä¸ªå¤šä¸ªä¸€ç»´æ•°ç»„é›†åˆç»„è£…ä¸ºå•ä¸ªä¸€ç»´æ•°ç»„é›†åˆ\r\n```PHP\r\n// å¤šä¸ªä¸€ç»´æ•°ç»„çš„å€¼ array_merege\r\n>>> collect([[1, 2, 3], [4, 5, 6], [7, 8, 9]])->collapse()->all()\r\n=> [1,2,3,4,5,6,7,8,9]\r\n// ä¸é€‚ç”¨å¤šç»´æ•°ç»„\r\n>>> collect([['foo' => 10], ['foo' => 10], ['foo' => 20], ['foo' => 20], ['foo' => 40]])->collapse()->all()\r\n=> [\"foo\" => 40]\r\n>>>\r\n```\r\n\r\n#### contains()\r\n>contains($key, $operator = null, $value = null) æ–¹æ³•æ£€æŸ¥é›†åˆæœ‰å¦åŒ…å«æŒ‡å®šçš„å…ƒç´ \r\ncontains æ–¹æ³•ç”¨ â€œæ¾æ•£â€ æ¯”è¾ƒæ£€æŸ¥å…ƒç´ å€¼ï¼Œç”¨ containsStrict æ–¹æ³•ä½¿ç”¨ â€œä¸¥æ ¼â€ æ¯”è¾ƒè¿‡æ»¤ã€‚\r\n```PHP\r\n// å•ä¸ªæ•°å€¼æˆ–è€…å›èª¿å‡½æ•¸åˆ¤æ–­\r\n>>> collect([1,2,3,4])->contains(1)\r\n=> true\r\n>>> collect([['foo' => 10],['foo' => 20]])->contains(function($val){ return $val['foo'] > 20 ;});\r\n=> true\r\n\r\n// æ•°ç»„ï¼Œé”®å€¼å¯¹\r\n>>> collect([['foo' => 10], ['foo' => 10], ['foo' => 40]])->contains(['foo' => 10])\r\n=> true\r\n>>> collect([['foo' => 10], ['foo' => 10], ['foo' => 40]])->contains('foo',10)\r\n=> true\r\n// æ”¯æŒå¤šç¨®æ¯”è¼ƒæŸ¥è©¢ == <> > < !== ç­‰ç­‰\r\n>>> collect([['foo' => 10], ['foo' => 10], ['foo' => 40]])->contains('foo', '>', 10)\r\n=> true\r\n```\r\n\r\n#### crossJoin()\r\n> crossJoin(...$lists)  æ–¹æ³•äº¤å‰è¿æ¥æŒ‡å®šæ•°ç»„æˆ–é›†åˆçš„å€¼ï¼Œè¿”å›æ‰€æœ‰å¯èƒ½æ’åˆ—çš„ç¬›å¡å°”ç§¯\r\n\r\n```PHP\r\n// æ•°ç»„å¾ªç¯è¿­ä»£ï¼Œæ¯æ¬¡æ¯ä¸ªé›†åˆä¸­å–ä¸€ä¸ª ç±»ä¼¼äº An1*M \r\n>>> collect([1,2])->crossJoin([3,4])->all()\r\n=> [\r\n     [1,3],\r\n     [1,4],\r\n     [2,3],\r\n     [2,4],\r\n   ]\r\n>>>\r\n\r\n```\r\n\r\n#### diff()\r\n>æ•°ç»„ä¸­array_diff()æ–¹æ³•ï¼Œæœ¬å‡½æ•°åªæ£€æŸ¥äº†å¤šç»´æ•°ç»„ä¸­çš„ä¸€ç»´\r\n```PHP\r\n>>> collect([1,2])->diff([1,2,3,4])->all()\r\n=> []\r\n>>> collect([1,2,5])->diff([1,2,3,4])->all()\r\n=> [2 => 5]\r\n```\r\n#### diffUsing()\r\n#### diffAssoc()\r\n#### diffAssocUsing()\r\n#### diffKeys()\r\n#### diffKeysUsing()\r\n#### duplicates()\r\n>duplicates($callback = null, $strict = false) ä»é›†åˆä¸­æ£€ç´¢å¹¶è¿”å›é‡å¤çš„å€¼\r\n```PHP\r\n// ä¸€èˆ¬ç”¨æ³•\r\n>>> collect(['a', 'b', 'a', 'c', 'b'])->duplicates()->all()\r\n=> [2 => \"a\", 4 => \"b\"]\r\n// å¦‚æœé›†åˆåŒ…å«æ•°ç»„æˆ–å¯¹è±¡ï¼Œåˆ™å¯ä»¥éœ€è¦æ£€æŸ¥é‡å¤å€¼çš„å±æ€§çš„é”®\r\n>>> collect([['foo' => 10], ['foo' => 10], ['foo' => 40]])->duplicates('foo')->all();\r\n=> [1 => 10]\r\n```\r\n#### duplicatesStrict()\r\n#### except()\r\n> except($keys) æ–¹æ³•è¿”å›é›†åˆä¸­é™¤äº†æŒ‡å®šé”®ä¹‹å¤–çš„æ‰€æœ‰é›†åˆé¡¹ï¼š\r\n```PHP\r\n// å‚æ•°å¯ä¼ å•ä¸ªå­—æ®µï¼Œä¹Ÿå¯ä»¥ä¼ æšä¸¾ç±»å‹çš„æ•°ç»„\r\n>>> collect(['foo' => 10, 'foo2' => 10, 'foo' => 40])->except('foo')->all();\r\n=> [\"foo2\" => 10]\r\n>>> collect(['foo' => 10, 'foo2' => 10, 'foo3' => 40])->except(['foo','foo2'])->all();\r\n=> [\"foo3\" => 10]\r\n```\r\n\r\n#### filter()\r\n> ç”¨ç»™å®šçš„å›è°ƒå‡½æ•°è¿‡æ»¤é›†åˆï¼Œåªä¿ç•™é‚£äº›é€šè¿‡æŒ‡å®šæ¡ä»¶æµ‹è¯•çš„é›†åˆé¡¹;å¦‚æœæ²¡æœ‰æä¾›å›è°ƒå‡½æ•°ï¼Œé›†åˆä¸­æ‰€æœ‰è¿”å› false çš„å…ƒç´ éƒ½ä¼šè¢«ç§»é™¤\r\n```PHP\r\n// æŒ‡å®šå›è°ƒå‡½æ•°ï¼Œè¿‡æ»¤é›†åˆ\r\n>>> collect([['foo' => 10], ['foo' => 10], ['foo' => 40]])->filter(function($val){ return $val['foo'] > 20;})->all();\r\n=> [\r\n     2 => [\r\n       \"foo\" => 40,\r\n     ],\r\n   ]\r\n// æ²¡æœ‰å›è°ƒå‡½æ•°ï¼Œç›´æ¥è¿‡æ»¤false array_filter()\r\n>>> collect([1, 2, 3, null, false, '', 0, []])->filter()->all()\r\n=> [1, 2, 3]\r\n```\r\n\r\n#### first()\r\n> first(callable $callback = null, $default = null) ä»é›†åˆä¸­è¿”å›ç¬¦åˆæ¡ä»¶çš„ç¬¬ä¸€ä¸ªå€¼ï¼Œæ”¯æŒå›è°ƒå‡½æ•°ï¼›å¯è®¾ç½®é»˜è®¤å€¼$default\r\n```PHP\r\n>>> collect()->first();\r\n=> null\r\n>>> collect([1, 2, 3, 4])->first();\r\n=> 1\r\n>>> collect([1, 2, 3, 4])->first(function($val){ return $val > 30;});\r\n=> null\r\n>>> collect([1, 2, 3, 4])->first(function($val){ return $val > 3;});\r\n=> 4\r\n>>> collect([1, 2, 3, 4])->first(function($val){ return $val > 5;}, 5);\r\n=> 5\r\n```\r\n\r\n#### flatten()\r\n> flatten($depth = INF) flatten($depth = INF) å°†å¤šç»´é›†åˆè½¬æ¢ä¸ºä¸€ç»´é›†åˆï¼Œå…¶ä¸­ $depth ä¸ºè½¬æ¢æ·±åº¦\r\n```PHP\r\n>>> collect([['foo' => 10], ['foo' => 10], ['foo' => 40]])->flatten()->all();\r\n=> [10,10,40]\r\n>>> collect([1=>'a', 2=>['b'=>['c' => 'd']]])->flatten(2)->all()\r\n=> [\"a\",\"d\",]\r\n```\r\n\r\n#### flip()\r\n#### forget()\r\n> forget($keys) é€šè¿‡æŒ‡å®šçš„é”®æ¥ç§»é™¤é›†åˆä¸­å¯¹åº”çš„å†…å®¹\r\n```PHP\r\n>>> collect(['foo' => 10, 'foo2' => 10, 'foo3' => 40])->forget(['foo','foo2'])->all();\r\n=> [\"foo3\" => 40]\r\n```\r\n#### get()\r\n> get($key, $default = null) æ–¹æ³•è¿”å›æŒ‡å®šé”®çš„é›†åˆé¡¹ï¼Œå¦‚æœè¯¥é”®åœ¨é›†åˆä¸­ä¸å­˜åœ¨ï¼Œåˆ™è¿”å› nullï¼›å¯ä¼ é€’é»˜è®¤å‚æ•°defaultï¼Œè¯¥é»˜è®¤å‚æ•°å¯ä¸ºå›è°ƒå‡½æ•°\r\n```PHP\r\n>>> collect(['a' => 1])->get('a')\r\n=> 1\r\n>>> collect(['a' => 1])->get('b')\r\n=> null\r\n>>> collect(['a' => 1])->get('b', 11)\r\n=> 11\r\n>>> collect(['a' => 1])->get('b', function(){return 111;})\r\n=> 111\r\n>>>\r\n```\r\n\r\n#### groupBy()\r\n#### keyBy()\r\n> æ–¹æ³•ä»¥æŒ‡å®šçš„é”®ä½œä¸ºæ–°é›†åˆçš„é”®ã€‚å¦‚æœå¤šä¸ªé›†åˆé¡¹å…·æœ‰ç›¸åŒçš„é”®ï¼Œåˆ™åªæœ‰æœ€åä¸€ä¸ªé›†åˆé¡¹ä¼šæ˜¾ç¤ºåœ¨æ–°é›†åˆä¸­;æ”¯æŒå¯¹è°ƒå‡½æ•° \r\n```PHP\r\n// ä¸€èˆ¬ä½¿ç”¨ï¼Œç›´æ¥ä¼ é€’æŸä¸ªé”®\r\n>>> collect([[ 'a'=>1,'b'=>2],['a'=>3,'b'=>4]])->keyBy('a')->all()\r\n=> [\r\n     1 => [\"a\" => 1,\"b\" => 2,],\r\n     3 => [\"a\" => 3,\"b\" => 4,],\r\n   ]\r\n// å›è°ƒå‡½æ•°è¿”å›çš„å€¼ä¼šä½œä¸ºè¯¥é›†åˆçš„é”®   \r\n>>> collect([[ 'a'=>1,'b'=>2],['a'=>3,'b'=>4]])->keyBy(function($item){return $item['a']+10;})->all()\r\n=> [\r\n     11 => [\"a\" => 1,\"b\" => 2,],\r\n     13 => [\"a\" => 3,\"b\" => 4,],\r\n   ]\r\n```\r\n\r\n#### has()\r\n> has($key) åˆ¤æ–­é›†åˆä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šé”®,æ”¯æŒä¼ å…¥å¤šä¸ªé”® array_key_existsåº•å±‚æ–¹æ³•\r\n```PHP\r\n>>> collect([ 'a'=>1,'b'=>2, 'c'=>3])->has('a')\r\n=> true\r\n>>> collect([ 'a'=>1,'b'=>2, 'c'=>3])->has(['a','b'])\r\n=> true\r\n>>> collect([ 'a'=>1,'b'=>2, 'c'=>3])->has(['a','b','d'])\r\n=> false\r\n```\r\n\r\n#### implode\r\n> implode($value, $glue = null) ç”¨äºåˆå¹¶é›†åˆé¡¹\r\n```PHP\r\n// é›†åˆä¸­åŒ…å«ç®€å•çš„å­—ç¬¦ä¸²æˆ–æ•°å€¼\r\n>>> collect([ 'a'=>1,'b'=>2, 'c'=>3])->implode('*')\r\n=> \"1*2*3\"\r\n// é›†åˆåŒ…å«æ•°ç»„æˆ–å¯¹è±¡\r\n>>> collect([[ 'a'=>1,'b'=>2],['a'=>3,'b'=>4]])->implode('a', '**')\r\n=> \"1**3\"\r\n```\r\n\r\n#### intersect()\r\n#### intersectByKeys()\r\n#### isEmpty()\r\n#### join()\r\n>join($glue, $finalGlue = '') å°†é›†åˆä¸­çš„å€¼ç”¨å­—ç¬¦ä¸²è¿æ¥\r\n```PHP\r\n>>> collect(['a', 'b', 'c'])->join(', ');\r\n=> 'a, b, c'\r\n>>> collect(['a', 'b', 'c'])->join(', ', ', and ');\r\n=> 'a, b, and c'\r\n>>> collect(['a', 'b'])->join(', ', ' and ');\r\n=> 'a and b'\r\n>>> collect(['a'])->join(', ', ' and '); \r\n=> 'a'\r\n>>> collect([])->join(', ', ' and '); \r\n=> ''\r\n```\r\n\r\n#### keys()\r\n#### last()\r\n>last() è¿”å›é›†åˆä¸­é€šè¿‡æŒ‡å®šæ¡ä»¶æµ‹è¯•çš„æœ€åä¸€ä¸ªå…ƒç´ \r\n```PHP\r\n// ä¸€èˆ¬è°ƒç”¨ï¼Œç›´æ¥è¿”å›æœ€åæœ‰ä¸€ä¸ªå…ƒç´ \r\n>>> collect([ 'a'=>1,'b'=>2, 'c'=>3])->last();\r\n=> 3\r\n// å›è°ƒå‡½æ•°ï¼Œè¿”å›ç¬¦åˆæ¡ä»¶çš„æœ€åä¸€ä¸ªå…ƒç´ \r\n>>> collect([ 'a'=>1,'b'=>2, 'c'=>3])->last(function($val){return $val<2;});\r\n=> 1\r\n```\r\n\r\n#### pluck()\r\n> pluck($value, $key = null) æ–¹æ³•å¯ä»¥è·å–é›†åˆä¸­æŒ‡å®šé”®å¯¹åº”çš„æ‰€æœ‰å€¼\r\n```PHP\r\n// æŒ‡å®šé”®å¯¹åº”çš„æ‰€æœ‰å€¼\r\n>>> collect([[ 'a'=>1,'b'=>2],['a'=>3,'b'=>4]])->pluck('a')->all();\r\n=> [1,3]\r\n// æŒ‡å®šç”Ÿæˆé›†åˆçš„é”®\r\n>>> collect([[ 'a'=>1,'b'=>2],['a'=>3,'b'=>4]])->pluck('a', 'b')->all();\r\n=> [2 => 1, 4 => 3]\r\n// å¦‚æœå­˜åœ¨é‡å¤çš„é”®ï¼Œåˆ™æœ€åä¸€ä¸ªåŒ¹é…å…ƒç´ å°†è¢«æ’å…¥åˆ°å¼¹å‡ºçš„é›†åˆä¸­\r\n>>> collect([['a'=>1,'b'=>2],['a'=>3,'b'=>2]])->pluck('a', 'b')->all();\r\n=> [2 => 3]\r\n```\r\n\r\n#### map()\r\n> map(callable $callback) éå†é›†åˆå¹¶å°†æ¯ä¸€ä¸ªå€¼ä¼ å…¥ç»™å®šçš„å›è°ƒå‡½æ•°, ç”Ÿæˆè¢«ä¿®æ”¹è¿‡é›†åˆé¡¹çš„æ–°é›†åˆ\r\n```PHP\r\n>>> collect([[ 'a'=>1,'b'=>2],['a'=>3,'b'=>2]])->map(function($item, $key){ return $item['a'] * 2;})->all();\r\n=> [2,6]\r\n```\r\n\r\n#### mapToDictionary()\r\n#### mapWithKeys() \r\n>éå†é›†åˆå¹¶å°†æ¯ä¸ªå€¼ä¼ å…¥ç»™å®šçš„å›è°ƒå‡½æ•°ã€‚å°†è¿”å›ä¸€ä¸ªåŒ…å«å•ä¸ªé”® / å€¼å¯¹çš„å…³è”æ•°ç»„\r\n```PHP\r\n>>> collect([[ 'a'=>1,'b'=>2],['a'=>3,'b'=>4]])->mapWithKeys(function($item){return [$item['a'] => $item['b']];})->all()\r\n=> [\r\n     1 => 2,\r\n     3 => 4,\r\n   ]\r\n```\r\n\r\n#### merge() \r\n>æ–¹æ³•å°†åˆå¹¶æŒ‡å®šçš„æ•°ç»„æˆ–é›†åˆåˆ°åŸé›†åˆï¼Œå¦‚æœç»™å®šçš„é›†åˆé¡¹çš„å­—ç¬¦ä¸²é”®ä¸åŸé›†åˆä¸­çš„å­—ç¬¦ä¸²é”®ç›¸åŒ¹é…ï¼Œåˆ™æŒ‡å®šé›†åˆé¡¹çš„å€¼å°†è¦†ç›–åŸé›†åˆçš„å€¼ array_merge\r\n```PHP\r\n// ä¸€èˆ¬ä½¿ç”¨\r\n>>> collect([ 'a'=>1,'b'=>2])->merge(['c' => 5])->all();\r\n=> [\r\n     \"a\" => 1,\r\n     \"b\" => 2,\r\n     \"c\" => 5,\r\n   ]\r\n// æœ‰è¦†ç›–\r\n>>> collect([ 'a'=>1,'b'=>2])->merge(['a' => 5])->all();\r\n=> [\r\n     \"a\" => 5,\r\n     \"b\" => 2,\r\n   ]\r\n```\r\n#### mergeRecursive()\r\n> ä»¥é€’å½’çš„å½¢å¼åˆå¹¶ç»™å®šçš„æ•°ç»„æˆ–é›†åˆåˆ°åŸé›†åˆä¸­ array_merge_recursive\r\n```PHP\r\n// åŒä¸€ä¸ªé”®å€¼çš„åˆå¹¶\r\n>>> collect(['a'=>1,'b'=>2])->mergeRecursive(['a' => 5])->all();\r\n=> [\"a\" => [1,5,\"b\" => 2]\r\n>>> collect([ 'a'=>['c'=>1],'b'=>2])->mergeRecursive(['a' => 5])->all();\r\n=> [\"a\" => [\"c\" => 1,0 => 5,],\"b\" => 2,]\r\n```\r\n\r\n#### combine()\r\n> å°†ä¸€ä¸ªé›†åˆçš„å€¼ä½œä¸ºé”®ï¼Œä¸å¦ä¸€ä¸ªæ•°ç»„æˆ–é›†åˆçš„å€¼è¿›è¡Œç»“åˆ array_combine\r\n```PHP\r\n// ä¸€èˆ¬ä½¿ç”¨\r\n>>> collect(['a', 'b'])->combine([1,2])->all()\r\n=> [\r\n     \"a\" => 1,\r\n     \"b\" => 2,\r\n   ]\r\n// åªèƒ½ä¼ é€’ç›¸ç­‰æ•°é‡çš„é›†åˆ\r\n>>> collect(['a', 'b'])->combine([1,2,3])->all()\r\nPHP Warning:  array_combine(): Both parameters should have an equal number of elements in D:/dev/study/laravel/vendor/laravel/framework/src/Illuminate/Support/Collection.php on line 777\r\n=> [\r\n     false,\r\n   ]\r\n```\r\n\r\n#### union()\r\n> æ–¹æ³•å°†ç»™å®šæ•°ç»„æ·»åŠ åˆ°é›†åˆä¸­ã€‚å¦‚æœç»™å®šçš„æ•°ç»„å«æœ‰ä¸åŸé›†åˆä¸€æ ·çš„é”®ï¼Œåˆ™é¦–é€‰åŸå§‹é›†åˆçš„å€¼,è¿™ç‚¹å’Œmergeç›¸å\r\n```PHP\r\n>>> collect(['a'=>1, 'b'=>2])->union(['a'=>3,'d'=>4])->all()\r\n=> [\r\n     \"a\" => 1,\r\n     \"b\" => 2,\r\n     \"d\" => 4,\r\n   ]\r\n>>> collect(['a'=>1, 'b'=>2])->merge(['a'=>3,'d'=>4])->all()\r\n=> [\r\n     \"a\" => 3,\r\n     \"b\" => 2,\r\n     \"d\" => 4,\r\n   ]\r\n\r\n```\r\n\r\n#### nth()\r\n\r\n#### only()\r\n> è¿”å›é›†åˆä¸­æ‰€æœ‰æŒ‡å®šé”®çš„é›†åˆé¡¹\r\n```PHP\r\n>>> collect(['a'=>1, 'b'=>2])->only('a')->all()\r\n=> [\r\n     \"a\" => 1,\r\n   ]\r\n```\r\n\r\n#### pop()\r\n#### prepend()\r\n> prepend($value, $key = null) å°†æŒ‡å®šçš„å€¼æ·»åŠ çš„é›†åˆçš„å¼€å¤´\r\n```PHP\r\n// æ·»åŠ æŒ‡å®šå€¼åˆ°é›†åˆçš„å¼€å¤´\r\n>>> collect(['a'=>1,'b'=>2])->prepend('c')->all()\r\n=> [\r\n     0 => \"c\",\r\n     \"a\" => 1,\r\n     \"b\" => 2,\r\n   ]\r\n// æŒ‡å®šæ–°å¢é›†åˆé¡¹çš„é”®   \r\n>>> collect(['a'=>1,'b'=>2])->prepend('c',1)->all()\r\n=> [\r\n     1 => \"c\",\r\n     \"a\" => 1,\r\n     \"b\" => 2,\r\n   ]\r\n```\r\n#### push()\r\n> push($value) æ·»åŠ ä¸€ä¸ªå€¼äºé›†åˆæœ«å°¾,åªèƒ½æ’å…¥ä¸€ä¸ªå€¼\r\n```PHP\r\n>>> collect(['a','b'])->push('c','d')->all()\r\n=> [\"a\", \"b\", \"c\"]\r\n>>> collect([1, 2, 3])->push(4, 5)->all();\r\n=> [1, 2, 3, 4]\r\n```\r\n#### concat()\r\n> åœ¨é›†åˆçš„æœ«ç«¯é™„åŠ æŒ‡å®šçš„æ•°ç»„æˆ–è€…é›†åˆ\r\n```PHP\r\n>>> collect([1, 2, 3])->concat([4, 5])->all();\r\n=> [1, 2, 3, 4, 5]\r\n```\r\n\r\n#### pull()\r\n> pull($key, $default = null) æŒ‡å®šé”®å¯¹åº”çš„å€¼ä»é›†åˆä¸­ç§»é™¤å¹¶è¿”å›,defaultä¸ºé»˜è®¤å€¼\r\n```PHP\r\n>>> collect(['a'=>1,'b'=>2])->pull('a',0)\r\n=> 1\r\n>>> collect(['a'=>1,'b'=>2])->pull('c',3)\r\n=> 3\r\n```\r\n\r\n#### put()\r\n> put($key, $value) è®¾å®šé›†åˆå†…æŒ‡å®šé”®çš„å€¼ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™æ–°å¢åˆ°æœ«å°¾\r\n```PHP\r\n>>> collect(['a'=>1,'b'=>2])->put('c',3)->all()\r\n=> [\r\n     \"a\" => 1,\r\n     \"b\" => 2,\r\n     \"c\" => 3,\r\n   ]\r\n>>> collect(['a'=>1,'b'=>2])->put('a',3)->all()\r\n=> [\r\n     \"a\" => 3,\r\n     \"b\" => 2,\r\n   ]\r\n```\r\n\r\n#### random\r\n> random($number = null) é›†åˆä¸­è¿”å›ä¸€ä¸ªéšæœºé¡¹,$numberä¸èƒ½å¤§äºé›†åˆçš„æ•°é‡ï¼Œå¦åˆ™æŠ¥é”™\r\n```PHP\r\n// é»˜è®¤è¿”å›ä¸€ä¸ª\r\n>>> collect(['a'=>1,'b'=>2])->random()\r\n=> 2\r\n>>> collect(['a'=>1,'b'=>2])->random(2)->all()\r\n=> [\r\n     1,\r\n     2,\r\n   ]\r\n// å¤§äºé›†åˆæ•°é‡ï¼ŒæŠ¥é”™   \r\n>>> collect(['a'=>1,'b'=>2])->random(3)->all()\r\nInvalidArgumentException with message 'You requested 3 items, but there are only 2 items available.'\r\n```\r\n\r\n#### reduce\r\n> reduce(callable $callback, $initial = null) å°†æ¯æ¬¡è¿­ä»£çš„ç»“æœä¼ é€’ç»™ä¸‹ä¸€æ¬¡è¿­ä»£ï¼Œç›´åˆ°éå†å®Œé›†åˆ\r\n```PHP\r\n// å¾ªç¯è¿­ä»£ è¿”å›res\r\n>>> collect([1, 2, 3])->reduce(function($res,$val){ return $res+$val;});\r\n=> 6\r\n// resåˆå§‹å€¼\r\n>>> collect([1, 2, 3])->reduce(function($res,$val){ return $res+$val;},10);\r\n=> 16\r\n```\r\n\r\n#### replace\r\n> replace æ–¹æ³•ç±»ä¼¼äº mergeï¼Œä¸ä»…å¯ä»¥è¦†ç›–åŒ¹é…åˆ°çš„ç›¸åŒå­—ç¬¦ä¸²é”®çš„é›†åˆé¡¹ï¼Œè€Œä¸”ä¹Ÿå¯ä»¥è¦†ç›–æ•°å­—é”®çš„é›†åˆ\r\n```PHP\r\n>>> collect(['a'=>1,'b'=>2])->replace(['b'=>10])->all();\r\n=> [\r\n     \"a\" => 1,\r\n     \"b\" => 10,\r\n   ]\r\n>>> collect([1, 2, 3])->replace([1=>10])->all();\r\n=> [1, 10, 3]\r\n```\r\n\r\n#### replaceRecursive()\r\n\r\n#### reverse()\r\n\r\n#### search()\r\n>search($value, $strict = false) é›†åˆçš„æœå¯»æ–¹æ³•ï¼Œæœç´¢ç»™å®šçš„å€¼,è¿”å›é”®å€¼\r\n```PHP\r\n// æœå¯»æŒ‡å®šçš„å€¼\r\n>>> collect(['a'=>1,'b'=>2])->search('a');\r\n=> false\r\n>>> collect(['a'=>1,'b'=>2])->search('1');\r\n=> \"a\"\r\n// æŒ‡å®šä¸¥æ ¼æ¨¡å¼\r\n>>> collect(['a'=>1,'b'=>2])->search('1',true);\r\n=> false\r\n// æŒ‡å®šå›è°ƒå‡½æ•°\r\n>>> collect(['a'=>1,'b'=>2])->search(function($item,$key){return $item > 1;});\r\n=> \"b\"\r\n```\r\n\r\n#### shift()\r\n#### shuffle()\r\n#### skip()\r\n#### slice()\r\n> slice($offset, $length = null) è¿”å›é›†åˆä¸­ç»™å®šç´¢å¼•å¼€å§‹åé¢çš„éƒ¨åˆ†ï¼š array_slice()\r\n```PHP\r\n>>> collect([1, 2, 3, 4, 5, 6, 7])->slice(3)->all()\r\n=> [\r\n     3 => 4,\r\n     4 => 5,\r\n     5 => 6,\r\n     6 => 7,\r\n   ]\r\n>>> collect([1, 2, 3, 4, 5, 6, 7])->slice(2,2)->all()\r\n=> [\r\n     2 => 3,\r\n     3 => 4,\r\n   ]\r\n```\r\n\r\n#### split()\r\n#### chunk()\r\n> chunk($size) é›†åˆåˆ†å‰²æˆå¤šä¸ªæŒ‡å®šå¤§å°çš„è¾ƒå°é›†åˆ\r\n#### sort()\r\n#### sortDesc()\r\n#### sortBy()\r\n#### sortByDesc()\r\n#### sortKeys()\r\n#### sortKeysDesc()\r\n#### splice()\r\n#### take()\r\n#### takeUntil()\r\n#### takeWhile()\r\n#### transform()\r\n> transform(callable $callback) æ–¹æ³•ä¼šéå†æ•´ä¸ªé›†åˆï¼Œå¹¶å¯¹é›†åˆä¸­çš„æ¯é¡¹éƒ½ä¼šè°ƒç”¨å…¶å›è°ƒå‡½æ•°,å’ŒmapåŸç†ä¸€è‡´ï¼Œä½†æ˜¯è¯¥æ–¹æ³•ä¼šæ”¹å˜åŸæœ‰é›†åˆ\r\n```PHP\r\n// mapä¸ä¼šæ”¹å˜åŸé›†åˆçš„å€¼\r\n>>> $a = collect([1,2,3,4,5]);\r\n>>> $a->map(function($item,$key){return $item*2;})\r\n>>> $a->all();\r\n=> [1,2,3,4,5,]\r\n// transformæ”¹å˜åŸé›†åˆ\r\n>>> $a->transform(function($item,$key){return $item*2;})\r\n>>> $a->all();\r\n=> [2,4,6,8,10,]\r\n>>>\r\n```\r\n#### values()\r\n#### zip()\r\n#### pad()\r\n#### getIterator()\r\n#### count()\r\n#### add()\r\n#### toBase()\r\n> åŸºäºå½“å‰é›†åˆè¿”å›ä¸€ä¸ªæ–°çš„é›†åˆ\r\n#### offsetExists()\r\n#### offsetGet()\r\n#### offsetSet()\r\n#### offsetUnset()\r\n\r\n\r\n\r\n\r\n\r\n  [1]: https://github.com/xiaoxie110/laravel/blob/master/vendor/laravel/framework/src/Illuminate/Support/Collection.php",
      "data": {
        "title": "Laravelå­¦ä¹ -Collect",
        "date": "2020-06-06 18:13:32",
        "tags": [
          "laravel",
          "collect"
        ],
        "published": true,
        "hideInList": false,
        "feature": null,
        "isTop": false
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "laravel-collect"
    },
    {
      "content": "\n> æ¬¢è¿æ¥åˆ°æˆ‘çš„å°ç«™å‘€ï¼Œå¾ˆé«˜å…´é‡è§ä½ ï¼ğŸ¤\n\n## ğŸ  å…³äºæœ¬ç«™\n\n## ğŸ‘¨â€ğŸ’» åšä¸»æ˜¯è°\n\n## â›¹ å…´è¶£çˆ±å¥½\n\n## ğŸ“¬ è”ç³»æˆ‘å‘€\n",
      "data": {
        "title": "å…³äº",
        "date": "2019-01-25 19:09:48",
        "tags": [],
        "published": true,
        "hideInList": true,
        "feature": null,
        "isTop": false
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "",
      "fileName": "about"
    },
    {
      "content": "ğŸ‘  æ¬¢è¿ä½¿ç”¨ **Gridea** ï¼  \nâœï¸  **Gridea** ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ... \n\n<!-- more -->\n\n[Github](https://github.com/getgridea/gridea)  \n[Gridea ä¸»é¡µ](https://gridea.dev/)  \n[ç¤ºä¾‹ç½‘ç«™](http://fehey.com/)\n\n## ç‰¹æ€§ğŸ‘‡\nğŸ“  ä½ å¯ä»¥ä½¿ç”¨æœ€é…·çš„ **Markdown** è¯­æ³•ï¼Œè¿›è¡Œå¿«é€Ÿåˆ›ä½œ  \n\nğŸŒ‰  ä½ å¯ä»¥ç»™æ–‡ç« é…ä¸Šç²¾ç¾çš„å°é¢å›¾å’Œåœ¨æ–‡ç« ä»»æ„ä½ç½®æ’å…¥å›¾ç‰‡  \n\nğŸ·ï¸  ä½ å¯ä»¥å¯¹æ–‡ç« è¿›è¡Œæ ‡ç­¾åˆ†ç»„  \n\nğŸ“‹  ä½ å¯ä»¥è‡ªå®šä¹‰èœå•ï¼Œç”šè‡³å¯ä»¥åˆ›å»ºå¤–éƒ¨é“¾æ¥èœå•  \n\nğŸ’»  ä½ å¯ä»¥åœ¨ **Windows**ï¼Œ**MacOS** æˆ– **Linux** è®¾å¤‡ä¸Šä½¿ç”¨æ­¤å®¢æˆ·ç«¯  \n\nğŸŒ  ä½ å¯ä»¥ä½¿ç”¨ **ğ–¦ğ—‚ğ—ğ—ğ—ğ–» ğ–¯ğ–ºğ—€ğ–¾ğ—Œ** æˆ– **Coding Pages** å‘ä¸–ç•Œå±•ç¤ºï¼Œæœªæ¥å°†æ”¯æŒæ›´å¤šå¹³å°  \n\nğŸ’¬  ä½ å¯ä»¥è¿›è¡Œç®€å•çš„é…ç½®ï¼Œæ¥å…¥ [Gitalk](https://github.com/gitalk/gitalk) æˆ– [DisqusJS](https://github.com/SukkaW/DisqusJS) è¯„è®ºç³»ç»Ÿ  \n\nğŸ‡¬ğŸ‡§  ä½ å¯ä»¥ä½¿ç”¨**ä¸­æ–‡ç®€ä½“**æˆ–**è‹±è¯­**  \n\nğŸŒ  ä½ å¯ä»¥ä»»æ„ä½¿ç”¨åº”ç”¨å†…é»˜è®¤ä¸»é¢˜æˆ–ä»»æ„ç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œå¼ºå¤§çš„ä¸»é¢˜è‡ªå®šä¹‰èƒ½åŠ›  \n\nğŸ–¥  ä½ å¯ä»¥è‡ªå®šä¹‰æºæ–‡ä»¶å¤¹ï¼Œåˆ©ç”¨ OneDriveã€ç™¾åº¦ç½‘ç›˜ã€iCloudã€Dropbox ç­‰è¿›è¡Œå¤šè®¾å¤‡åŒæ­¥  \n\nğŸŒ± å½“ç„¶ **Gridea** è¿˜å¾ˆå¹´è½»ï¼Œæœ‰å¾ˆå¤šä¸è¶³ï¼Œä½†è¯·ç›¸ä¿¡ï¼Œå®ƒä¼šä¸åœå‘å‰ ğŸƒ\n\næœªæ¥ï¼Œå®ƒä¸€å®šä¼šæˆä¸ºä½ ç¦»ä¸å¼€çš„ä¼™ä¼´\n\nå°½æƒ…å‘æŒ¥ä½ çš„æ‰åå§ï¼\n\nğŸ˜˜ Enjoy~\n",
      "data": {
        "title": "Hello Gridea",
        "date": "2018-12-12 00:00:00",
        "tags": [
          "Gridea"
        ],
        "published": true,
        "hideInList": true,
        "feature": "/post-images/hello-gridea.png",
        "isTop": false
      },
      "isEmpty": false,
      "excerpt": "",
      "abstract": "ğŸ‘  æ¬¢è¿ä½¿ç”¨ **Gridea** ï¼  \nâœï¸  **Gridea** ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ... ",
      "fileName": "hello-gridea"
    }
  ],
  "tags": [
    {
      "name": "cache",
      "slug": "dWgkYYvpg",
      "used": true
    },
    {
      "name": "laravel",
      "slug": "-83BydD-k",
      "used": true
    },
    {
      "name": "collect",
      "slug": "4vrsv0q_Rt",
      "used": true
    },
    {
      "name": "Gridea",
      "slug": "nqZh1LZMw",
      "used": true
    }
  ],
  "menus": [
    {
      "link": "/",
      "name": "é¦–é¡µ",
      "openType": "Internal"
    },
    {
      "link": "/archives",
      "name": "å½’æ¡£",
      "openType": "Internal"
    },
    {
      "link": "/tags",
      "name": "æ ‡ç­¾",
      "openType": "Internal"
    },
    {
      "link": "/post/about",
      "name": "å…³äº",
      "openType": "Internal"
    }
  ]
}